{"version":3,"sources":["components/header/Header.js","utils/todosDefaulValidator.js","contexts/todos/TodosContext.js","contexts/popup/PopupContext.js","utils/formatDate.js","components/popup/Popup.js","components/todo/TodoItem.js","components/todo/Todo.js","components/filter/Filter.js","App.js","index.js"],"names":["Header","props","logoText","className","todosDefaultValidator","todos","checked","filter","todo","noChecked","TodosContext","React","createContext","PopupContext","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","length","join","Popup","isOpen","popupName","blockBackground","todoText","todoDate","setPopupState","useContext","setTodos","useState","inputsState","setInputsState","todoTextErrorShow","todoDateErrorShow","inputErrorsState","setInputErrorsState","requiredInputsCount","successInputsCount","countsInputsInfo","setCountsInputsInfo","entryButtonState","setEntryButtonState","handleChange","e","validationStateController","data","succesValid","name","target","value","requiredCount","prev","Number","setRequiredInputsCount","dataset","inputscount","test","validate","closePopup","useEffect","succesCount","Object","values","forEach","errorShow","isValid","timer","setTimeout","clearTimeout","style","zIndex","backgroundColor","backgroundHandler","onClick","data-inputscount","type","placeholder","onChange","disabled","idArr","map","el","id","Math","max","text","ind","findIndex","TodoItem","todoTextRef","useRef","todoDateRef","todoEditRef","TodoContext","htmlFor","defaultTodosValidator","ref","stopPropagation","confirm","t","current","textContent","toLocaleString","Todo","Filter","defaultTodos","setDefaultTodos","resultTodos","setResultTodos","searchText","setSearchText","buttonEnabled","setButtonsEnabled","mainRef","toLowerCase","indexOf","sort","a","b","handleClick","button","startsWith","slice","buttonClassConstructor","btnName","App","todoList","localStorage","getItem","JSON","parse","backupTodos","popupState","setItem","stringify","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5e460285.chunk.js","sourcesContent":["import React from 'react';\r\nimport propTypes from 'prop-types';\r\nimport './header.css';\r\n\r\nconst Header = (props) => {\r\n  const { logoText } = props;\r\n  return (\r\n    <header>\r\n      <h1 className=\"header__logo-text\">{logoText}</h1>\r\n    </header>\r\n  );\r\n};\r\n\r\nHeader.propTypes = {\r\n  logoText: propTypes.string.isRequired,\r\n};\r\n\r\nexport default Header;\r\n","// import TodosList from '../backupTodos.json';\r\n\r\nconst todosDefaultValidator = (todos) => {\r\n  const checked = todos.filter((todo) => todo.checked === true);\r\n  const noChecked = todos.filter((todo) => todo.checked === false);\r\n  const result = [\r\n    ...noChecked,\r\n    ...checked,\r\n  ];\r\n  return result;\r\n};\r\n\r\nexport default todosDefaultValidator;\r\n","import React from 'react';\r\n\r\nconst TodosContext = React.createContext();\r\n\r\nexport default TodosContext;\r\n","import React from 'react';\r\n\r\nconst PopupContext = React.createContext();\r\n\r\nexport default PopupContext;\r\n","const formatDate = (date) => {\r\n  const d = new Date(date);\r\n  let month = `${d.getMonth() + 1}`;\r\n  let day = `${d.getDate()}`;\r\n  const year = d.getFullYear();\r\n\r\n  if (month.length < 2) month = `0${month}`;\r\n  if (day.length < 2) day = `0${day}`;\r\n\r\n  return [year, month, day].join('-');\r\n};\r\n\r\nexport default formatDate;\r\n","/* eslint-disable max-len */\r\n/* eslint-disable no-unreachable */\r\n/* eslint-disable no-param-reassign */\r\n/* eslint-disable no-shadow */\r\n/* eslint-disable react/require-default-props */\r\n/* eslint-disable jsx-a11y/click-events-have-key-events */\r\n/* eslint-disable jsx-a11y/no-static-element-interactions */\r\n/* eslint-disable no-return-assign */\r\n/* eslint-disable consistent-return */\r\nimport React, { useEffect, useState, useContext } from 'react';\r\nimport './popup.css';\r\nimport propTypes from 'prop-types';\r\nimport TodosContext from '../../contexts/todos/TodosContext';\r\nimport PopupContext from '../../contexts/popup/PopupContext';\r\nimport formatDate from '../../utils/formatDate';\r\n\r\nconst Popup = (props) => {\r\n  const {\r\n    isOpen, popupName = 'addTodo', blockBackground = true, todoText = '', todoDate = new Date(),\r\n  } = props;\r\n\r\n  const setPopupState = React.useContext(PopupContext);\r\n  const setTodos = useContext(TodosContext);\r\n\r\n  const [inputsState, setInputsState] = useState({\r\n    todoText,\r\n    todoDate,\r\n  });\r\n\r\n  const [inputErrorsState, setInputErrorsState] = useState({\r\n    todoTextErrorShow: false,\r\n    todoDateErrorShow: false,\r\n  });\r\n  const [countsInputsInfo, setCountsInputsInfo] = useState({\r\n    requiredInputsCount: 1,\r\n    successInputsCount: 0,\r\n  });\r\n  const [entryButtonState, setEntryButtonState] = useState(false);\r\n\r\n  const validate = (e) => {\r\n    const validationStateController = (...data) => {\r\n      const [e, succesValid] = data;\r\n      const { name } = e.target;\r\n      const { value } = e.target;\r\n      const setRequiredInputsCount = (requiredCount) => setCountsInputsInfo((prev) => ({\r\n        ...prev,\r\n        requiredInputsCount: Number(requiredCount),\r\n      }));\r\n      setRequiredInputsCount(e.target.dataset.inputscount);\r\n      setInputsState((prev) => ({\r\n        ...prev,\r\n        [name]: value,\r\n      }));\r\n      if (!succesValid) {\r\n        setInputErrorsState((prev) => ({\r\n          ...prev,\r\n          [`${name}ErrorShow`]: true,\r\n        }));\r\n      } else {\r\n        setInputErrorsState((prev) => ({\r\n          ...prev,\r\n          [`${name}ErrorShow`]: false,\r\n        }));\r\n      }\r\n    };\r\n\r\n    switch (e.target.name) {\r\n      case 'todoText':\r\n        if (e.target.value.length >= 5 && /[а-яёa-zA-Z1-9]/i.test(e.target.value)) { return validationStateController(e, true); }\r\n        return validationStateController(e, false);\r\n      case 'todoDate':\r\n        return setInputsState((prev) => ({\r\n          ...prev,\r\n          todoDate: e.target.value,\r\n        }));\r\n      default:\r\n    }\r\n  };\r\n\r\n  const backgroundHandler = () => {\r\n    if (!blockBackground) {\r\n      return {\r\n        zIndex: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0)',\r\n      };\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    validate(e);\r\n  };\r\n\r\n  const closePopup = () => {\r\n    setPopupState({ isOpen: false });\r\n  };\r\n\r\n  const addTodoHandler = () => {\r\n    setTodos((prev) => {\r\n      const idArr = prev.map((el) => el.id);\r\n      const id = Math.max(...idArr, 0) + 1;\r\n      return [\r\n        {\r\n          text: inputsState.todoText,\r\n          date: inputsState.todoDate,\r\n          checked: false,\r\n          id,\r\n        },\r\n        ...prev,\r\n      ];\r\n    });\r\n    closePopup();\r\n  };\r\n\r\n  const editTodoHandler = () => {\r\n    setTodos((prev) => {\r\n      const ind = prev.findIndex((el) => el.text === todoText);\r\n      prev[ind].text = inputsState.todoText;\r\n      prev[ind].date = inputsState.todoDate;\r\n      return prev;\r\n    });\r\n    closePopup();\r\n  };\r\n\r\n  useEffect(() => {\r\n    let succesCount = 0;\r\n    Object.values(inputErrorsState).forEach((errorShow) => {\r\n      if (!errorShow) return succesCount += 1;\r\n    });\r\n    setCountsInputsInfo((prev) => ({\r\n      ...prev,\r\n      successInputsCount: succesCount,\r\n    }));\r\n  }, [inputErrorsState]);\r\n\r\n  useEffect(() => {\r\n    const isValid = countsInputsInfo.successInputsCount === countsInputsInfo.requiredInputsCount;\r\n    setEntryButtonState(isValid);\r\n  }, [countsInputsInfo]);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(setEntryButtonState, 0, false);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setInputsState({\r\n      todoText,\r\n      todoDate: formatDate(todoDate),\r\n    });\r\n  }, [todoText]);\r\n\r\n  return (\r\n    <div>\r\n      <div className={isOpen ? 'popup' : 'popup_hidden'} style={backgroundHandler()} onClick={(e) => e.target.className === 'popup' && closePopup()}>\r\n\r\n        {popupName === 'addTodo' && (\r\n        <div className=\"popup__content\">\r\n          <h2 className=\"popup__title\">Добавить задачу</h2>\r\n          <div className=\"popup__close\" onClick={() => closePopup()} />\r\n          <form className=\"popup__form\">\r\n            <p className=\"popup__input-descriptor\">Задача</p>\r\n            <input name=\"todoText\" data-inputscount=\"2\" className=\"input popup__input\" type=\"text\" placeholder=\"Введите текст задачи\" onChange={handleChange} value={inputsState.todoText} />\r\n            {!inputErrorsState.todoTextErrorShow ? <p className=\"popup__input-error popup__input-error_hidden\"> </p> : <p className=\"popup__input-error\">Слишком короткий текст</p>}\r\n            <p className=\"popup__input-descriptor\">Дата</p>\r\n            <input name=\"todoDate\" data-inputscount=\"2\" className=\"input popup__input\" type=\"date\" placeholder=\"Введите дату\" onChange={handleChange} value={inputsState.todoDate} />\r\n            {!inputErrorsState.todoDateErrorShow ? <p className=\"popup__input-error popup__input-error_hidden\"> </p> : <p className=\"popup__input-error\">Не выбрана дата</p>}\r\n            <button type=\"button\" className={entryButtonState ? 'button popup__button popup__button_entry' : 'button popup__button popup__button_disable popup__button_entry'} disabled={!entryButtonState} onClick={addTodoHandler}>Добавить</button>\r\n          </form>\r\n        </div>\r\n        )}\r\n\r\n        {popupName === 'editTodo' && (\r\n        <div className=\"popup__content\">\r\n          <h2 className=\"popup__title\">Редактировать задачу</h2>\r\n          <div className=\"popup__close\" onClick={() => closePopup()} />\r\n          <form className=\"popup__form\">\r\n            <p className=\"popup__input-descriptor\">Задача</p>\r\n            <input name=\"todoText\" data-inputscount=\"2\" className=\"input popup__input\" type=\"text\" placeholder=\"Введите текст задачи\" onChange={handleChange} value={inputsState.todoText} />\r\n            {!inputErrorsState.todoTextErrorShow ? <p className=\"popup__input-error popup__input-error_hidden\"> </p> : <p className=\"popup__input-error\">Слишком короткий текст</p>}\r\n            <p className=\"popup__input-descriptor\">Дата</p>\r\n            <input name=\"todoDate\" data-inputscount=\"2\" className=\"input popup__input\" type=\"date\" placeholder=\"Введите дату\" onChange={handleChange} value={inputsState.todoDate} />\r\n            {!inputErrorsState.todoDateErrorShow ? <p className=\"popup__input-error popup__input-error_hidden\"> </p> : <p className=\"popup__input-error\">Не выбрана дата</p>}\r\n            <button type=\"button\" className={entryButtonState ? 'button popup__button popup__button_entry' : 'button popup__button popup__button_disable popup__button_entry'} disabled={!entryButtonState} onClick={editTodoHandler}>Изменить</button>\r\n          </form>\r\n        </div>\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nPopup.propTypes = {\r\n  isOpen: propTypes.bool.isRequired,\r\n  blockBackground: propTypes.bool,\r\n  popupName: propTypes.string,\r\n  todoText: propTypes.string,\r\n  todoDate: propTypes.instanceOf(Date),\r\n};\r\nexport default Popup;\r\n","/* eslint-disable no-param-reassign */\r\n/* eslint-disable no-restricted-globals */\r\n/* eslint-disable no-alert */\r\n/* eslint-disable jsx-a11y/click-events-have-key-events */\r\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\r\nimport React from 'react';\r\nimport propTypes from 'prop-types';\r\nimport './todo.css';\r\nimport TodoContext from '../../contexts/todos/TodosContext';\r\nimport PopupContext from '../../contexts/popup/PopupContext';\r\nimport defaultTodosValidator from '../../utils/todosDefaulValidator';\r\n\r\nconst TodoItem = (props) => {\r\n  const { todo } = props;\r\n  const date = typeof (todo.date) === 'string' ? new Date(todo.date) : todo.date;\r\n\r\n  const todoTextRef = React.useRef();\r\n  const todoDateRef = React.useRef();\r\n  const todoEditRef = React.useRef();\r\n\r\n  const setPopupState = React.useContext(PopupContext);\r\n  const setTodos = React.useContext(TodoContext);\r\n\r\n  const checkHandle = (e) => {\r\n    setTodos((prev) => {\r\n      const ind = prev.findIndex((el) => el.text === todo.text);\r\n      prev[ind].checked = e.target.checked;\r\n      prev = defaultTodosValidator(prev);\r\n      return [\r\n        ...prev,\r\n      ];\r\n    });\r\n  };\r\n\r\n  const removeHandleClick = (e) => {\r\n    e.stopPropagation();\r\n    if (confirm('Удалить задачу?')) { setTodos((todos) => todos.filter((t) => t.id !== todo.id)); }\r\n  };\r\n\r\n  const editHandleClick = (e) => {\r\n    e.stopPropagation();\r\n    setPopupState({\r\n      isOpen: true,\r\n      popupName: 'editTodo',\r\n      todoText: todoTextRef.current.textContent,\r\n      todoDate: date,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"todo-list__item\">\r\n      <label className=\"todo-list__label\" htmlFor={todo.id}>\r\n        <input type=\"checkbox\" id={todo.id} className=\"todo-list__checkbox\" onChange={checkHandle} checked={todo.checked} />\r\n        <span className=\"todo-list__description\" ref={todoTextRef}>{todo.text}</span>\r\n      </label>\r\n      <p className=\"todo-list__remove-btn\" onClick={removeHandleClick}>Удалить задачу</p>\r\n      <p className=\"todo-list__edit-btn\" onClick={editHandleClick} ref={todoEditRef}>Редактировать задачу</p>\r\n      <span className=\"todo-list__description_time\" ref={todoDateRef}>{date.toLocaleString('ru', { year: 'numeric', month: 'long', day: 'numeric' })}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nTodoItem.propTypes = {\r\n  todo: propTypes.shape({\r\n    date: propTypes.oneOfType([\r\n      propTypes.instanceOf(Date),\r\n      propTypes.string,\r\n    ]).isRequired,\r\n    id: propTypes.number.isRequired,\r\n    text: propTypes.string.isRequired,\r\n    checked: propTypes.bool.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default TodoItem;\r\n","import React from 'react';\r\nimport propTypes from 'prop-types';\r\nimport './todo.css';\r\nimport TodoItem from './TodoItem';\r\nimport PopupContext from '../../contexts/popup/PopupContext';\r\n\r\nconst Todo = (props) => {\r\n  const { todos } = props;\r\n\r\n  const setPopupState = React.useContext(PopupContext);\r\n\r\n  const addTodoHandleClick = () => {\r\n    setPopupState({\r\n      isOpen: true,\r\n      popupName: 'addTodo',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <section className=\"todo\">\r\n      <button type=\"button\" className=\"todo-list__add-button\" onClick={addTodoHandleClick}>Добавить задачу</button>\r\n      <div className=\"todo-list\">\r\n        {todos.length\r\n          ? todos.map((todo) => <TodoItem key={todo.id} todo={todo} />)\r\n          : <p className=\"todo-list__epmty-text\">Нет задач</p>}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nTodo.propTypes = {\r\n  todos: propTypes.arrayOf(propTypes.object).isRequired,\r\n};\r\n\r\nexport default Todo;\r\n","/* eslint-disable max-len */\r\n/* eslint-disable no-unused-vars */\r\nimport React from 'react';\r\nimport './filter.css';\r\nimport propTypes from 'prop-types';\r\nimport Todo from '../todo/Todo';\r\n\r\nconst Filter = (props) => {\r\n  const { todos } = props;\r\n\r\n  const [defaultTodos, setDefaultTodos] = React.useState(todos);\r\n  const [resultTodos, setResultTodos] = React.useState(todos);\r\n  const [searchText, setSearchText] = React.useState('');\r\n  const [buttonEnabled, setButtonsEnabled] = React.useState(['early!']);\r\n\r\n  const mainRef = React.useRef();\r\n\r\n  React.useEffect(() => {\r\n    setDefaultTodos(todos);\r\n  }, [todos]);\r\n\r\n  React.useEffect(() => {\r\n    setResultTodos(defaultTodos.filter((el) => el.text.toLowerCase().indexOf(searchText.toLowerCase()) !== -1));\r\n    if (buttonEnabled.indexOf('completed') !== -1) {\r\n      setResultTodos((prev) => prev.filter((el) => el.checked === true));\r\n    } else if (buttonEnabled.indexOf('completed!') !== -1) {\r\n      setResultTodos((prev) => prev.filter((el) => el.checked === false));\r\n    } else if (buttonEnabled.indexOf('early') !== -1) {\r\n      setResultTodos((prev) => prev.sort((a, b) => {\r\n        if (a.date < b.date) return 1;\r\n        if (a.date > b.date) return -1;\r\n        return 0;\r\n      }));\r\n    } else if (buttonEnabled.indexOf('early!') !== -1) {\r\n      setResultTodos((prev) => prev.sort((a, b) => {\r\n        if (a.date < b.date) return -1;\r\n        if (a.date > b.date) return 1;\r\n        return 0;\r\n      }));\r\n    }\r\n  }, [searchText, defaultTodos, buttonEnabled]);\r\n\r\n  const handleClick = (e) => {\r\n    if (buttonEnabled.indexOf(e.target.name) !== -1) {\r\n      setButtonsEnabled((prev) => prev.filter((button) => button !== e.target.name));\r\n    } else {\r\n      setButtonsEnabled((prev) => prev.filter((button) => !button.startsWith(e.target.name.slice(0, -1))));\r\n      setButtonsEnabled((prev) => [\r\n        ...prev,\r\n        e.target.name,\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const buttonClassConstructor = (btnName) => {\r\n    if (buttonEnabled.indexOf(btnName) !== -1) {\r\n      return 'filter__button_enabled';\r\n    }\r\n    return 'filter__button';\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setSearchText(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <section className=\"filter\" ref={mainRef}>\r\n        <input className=\"filter__input\" name=\"filterName\" placeholder=\"По ключевому слову\" onChange={handleChange} />\r\n        <button className={buttonClassConstructor('completed')} type=\"button\" onClick={handleClick} name=\"completed\">Выполненые</button>\r\n        <button className={buttonClassConstructor('completed!')} type=\"button\" onClick={handleClick} name=\"completed!\">Не выполненые</button>\r\n        <button className={buttonClassConstructor('early!')} type=\"button\" onClick={handleClick} name=\"early!\">Сначала ранние</button>\r\n        <button className={buttonClassConstructor('early')} type=\"button\" onClick={handleClick} name=\"early\">Сначала поздние</button>\r\n      </section>\r\n      <Todo todos={resultTodos} />\r\n    </>\r\n  );\r\n};\r\n\r\nFilter.propTypes = {\r\n  todos: propTypes.arrayOf(propTypes.object).isRequired,\r\n};\r\n\r\nexport default Filter;\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React from 'react';\r\nimport './App.css';\r\nimport Header from './components/header/Header';\r\nimport todosDefaultValidator from './utils/todosDefaulValidator';\r\nimport TodosContext from './contexts/todos/TodosContext';\r\nimport PopupContext from './contexts/popup/PopupContext';\r\nimport Popup from './components/popup/Popup';\r\nimport backupTodos from './backupTodos.json';\r\nimport Filter from './components/filter/Filter';\r\n\r\nfunction App() {\r\n  const todoList = todosDefaultValidator(localStorage.getItem('todos') ? JSON.parse(localStorage.getItem('todos')) : backupTodos);\r\n  const [todos, setTodos] = React.useState(todoList);\r\n  const [popupState, setPopupState] = React.useState({\r\n    isOpen: false,\r\n    popupName: 'addTodo',\r\n  });\r\n\r\n  localStorage.setItem('todos', JSON.stringify(todos));\r\n\r\n  return (\r\n    <>\r\n      <Header logoText=\"Todos list\" />\r\n      <TodosContext.Provider value={setTodos}>\r\n        <PopupContext.Provider value={setPopupState}>\r\n          <Filter todos={todos} />\r\n          <Popup {...popupState} />\r\n        </PopupContext.Provider>\r\n      </TodosContext.Provider>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}